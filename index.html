<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Infinity Craft - Ø§Ù„Ù…ÙˆØ¯Ø§Øª</title>
  <style>
    body {
      background: #fff;
      font-family: "Cairo", sans-serif;
      text-align: center;
    }
    header {
      background: red;
      color: white;
      padding: 15px;
      font-size: 24px;
    }
    .form-box {
      background: #f4f4f4;
      padding: 20px;
      margin: 20px auto;
      width: 90%;
      max-width: 400px;
      border-radius: 15px;
      box-shadow: 0 0 10px #ccc;
    }
    input, textarea {
      width: 90%;
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    button {
      background: green;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
    }
    .mod-card {
      border: 2px solid #ccc;
      border-radius: 15px;
      padding: 15px;
      margin: 10px;
      background: #e9ffe9;
      max-width: 400px;
      display: inline-block;
      vertical-align: top;
    }
    .mod-card img {
      width: 100%;
      border-radius: 10px;
    }
  </style>
  <script type="module">
    // âœ… Ø¥Ø¹Ø¯Ø§Ø¯ Firebase Ø§Ù„Ø¬Ø§Ù‡Ø² Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDRA4Ff3cUI_6EMk8HgmAQm0FyHuJp-4Eo",
      authDomain: "infinity-craft-demo.firebaseapp.com",
      projectId: "infinity-craft-demo",
      storageBucket: "infinity-craft-demo.appspot.com",
      messagingSenderId: "718392884900",
      appId: "1:718392884900:web:1b7c93e3082c4ab9cc1342"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // ğŸ”° Ù†Ø´Ø± Ù…ÙˆØ¯ Ø¬Ø¯ÙŠØ¯
    async function publishMod() {
      const name = document.getElementById("name").value;
      const description = document.getElementById("description").value;
      const imageUrl = document.getElementById("imageUrl").value;
      const downloadLink = document.getElementById("downloadLink").value;

      if (!name || !description || !imageUrl || !downloadLink) {
        alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ù…Ù„Ø£ ÙƒÙ„ Ø§Ù„Ø®Ø§Ù†Ø§Øª!");
        return;
      }

      try {
        await addDoc(collection(db, "mods"), {
          name,
          description,
          imageUrl,
          downloadLink
        });
        alert("âœ… ØªÙ… Ù†Ø´Ø± Ø§Ù„Ù…ÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!");
        loadMods();
      } catch (e) {
        alert("âŒ Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ø´Ø±");
      }
    }

    // ğŸ”° ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¯Ø§Øª Ù…Ù† Firebase
    async function loadMods() {
      const modsContainer = document.getElementById("mods");
      modsContainer.innerHTML = "";
      const querySnapshot = await getDocs(collection(db, "mods"));
      querySnapshot.forEach((doc) => {
        const mod = doc.data();
        const card = `
          <div class="mod-card">
            <img src="${mod.imageUrl}" alt="${mod.name}">
            <h3>${mod.name}</h3>
            <p>${mod.description}</p>
            <a href="${mod.downloadLink}" target="_blank">
              <button>ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¯</button>
            </a>
          </div>
        `;
        modsContainer.innerHTML += card;
      });
    }

    window.publishMod = publishMod;
    window.onload = loadMods;
  </script>
</head>
<body>
  <header>ğŸŒ Infinity Craft</header>

  <div class="form-box">
    <h2>Ù†Ø´Ø± Ù…ÙˆØ¯ Ø¬Ø¯ÙŠØ¯</h2>
    <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¯">
    <textarea id="description" placeholder="ÙˆØµÙ Ø§Ù„Ù…ÙˆØ¯"></textarea>
    <input id="imageUrl" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ù…ÙˆØ¯ (Ù…Ù† imgbb)">
    <input id="downloadLink" placeholder="Ø±Ø§Ø¨Ø· ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¯">
    <button onclick="publishMod()">Ù†Ø´Ø±</button>
  </div>

  <div id="mods"></div>
</body>
</html>
